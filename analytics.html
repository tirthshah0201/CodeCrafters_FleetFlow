<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fleet Flow â€“ Operational Analytics & Financial Reports</title>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&family=Sora:wght@300;400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
  <style>
    :root{
      --odoo-purple:#714B67;--odoo-primary:#017E84;--odoo-accent:#00C5CD;
      --odoo-gold:#F0A500;--bg-base:#0D0D0D;--bg-surface:#141414;
      --bg-card:#1A1A1A;--bg-hover:#222;--border:#2A2A2A;--border-bright:#333;
      --text-primary:#F0F0F0;--text-secondary:#888;--text-muted:#555;
      --danger:#E74C3C;--success:#27AE60;--warning:#F39C12;--info:#2980B9;
    }
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Sora',sans-serif;background:var(--bg-base);color:var(--text-primary);min-height:100vh;overflow-x:hidden}

    /* â”€â”€ NAV â”€â”€ */
    .topnav{background:var(--bg-surface);border-bottom:1px solid var(--border);display:flex;align-items:center;padding:0 24px;height:56px;gap:32px;position:sticky;top:0;z-index:100}
    .logo{display:flex;align-items:center;gap:10px;font-family:'IBM Plex Mono',monospace;font-weight:600;font-size:16px;color:var(--odoo-accent);text-decoration:none}
    .logo-icon{width:32px;height:32px;background:linear-gradient(135deg,var(--odoo-purple),var(--odoo-primary));border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:16px}
    .nav-links{display:flex;gap:4px;flex:1}
    .nav-link{padding:6px 14px;border-radius:6px;font-size:13px;color:var(--text-secondary);cursor:pointer;transition:all .2s;white-space:nowrap;user-select:none}
    .nav-link:hover{background:var(--bg-hover);color:var(--text-primary)}
    .nav-link.active{background:rgba(0,197,205,.12);color:var(--odoo-accent)}
    .nav-actions{display:flex;align-items:center;gap:12px}
    .avatar{width:32px;height:32px;border-radius:50%;background:linear-gradient(135deg,var(--odoo-purple),var(--odoo-primary));display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:600;cursor:pointer}

    /* â”€â”€ LAYOUT â”€â”€ */
    .main{display:flex;height:calc(100vh - 56px)}

    /* â”€â”€ SIDEBAR â”€â”€ */
    .sidebar{width:220px;background:var(--bg-surface);border-right:1px solid var(--border);padding:16px 0;flex-shrink:0;overflow-y:auto}
    .sidebar-section{padding:8px 16px 4px;font-size:10px;font-family:'IBM Plex Mono',monospace;letter-spacing:1.5px;color:var(--text-muted);text-transform:uppercase}
    .sidebar-item{display:flex;align-items:center;gap:10px;padding:9px 16px;font-size:13px;color:var(--text-secondary);cursor:pointer;transition:all .15s;border-left:2px solid transparent}
    .sidebar-item:hover{background:var(--bg-hover);color:var(--text-primary)}
    .sidebar-item.active{background:rgba(0,197,205,.08);color:var(--odoo-accent);border-left-color:var(--odoo-accent)}
    .sidebar-item .icon{font-size:16px;width:20px;text-align:center}

    /* â”€â”€ CONTENT â”€â”€ */
    .content{flex:1;overflow-y:auto;background:var(--bg-base)}

    /* â”€â”€ PAGE HEADER â”€â”€ */
    .page-header{padding:24px 28px 0;display:flex;align-items:flex-start;justify-content:space-between;gap:16px}
    .breadcrumb{font-size:12px;color:var(--text-muted);margin-bottom:6px;font-family:'IBM Plex Mono',monospace}
    .breadcrumb span{color:var(--odoo-accent)}
    .page-title{font-size:22px;font-weight:700;color:var(--text-primary);letter-spacing:-.3px}
    .page-title small{display:block;font-size:13px;font-weight:300;color:var(--text-secondary);margin-top:2px}
    .header-actions{display:flex;gap:8px;align-items:center}
    .btn-primary{display:flex;align-items:center;gap:8px;background:var(--odoo-primary);color:#fff;border:none;padding:10px 20px;border-radius:8px;font-size:13px;font-weight:600;font-family:'Sora',sans-serif;cursor:pointer;transition:all .2s;white-space:nowrap;box-shadow:0 0 20px rgba(1,126,132,.3)}
    .btn-primary:hover{background:var(--odoo-accent);box-shadow:0 0 28px rgba(0,197,205,.4);transform:translateY(-1px)}
    .btn-outline{display:flex;align-items:center;gap:8px;background:transparent;color:var(--text-secondary);border:1px solid var(--border);padding:10px 16px;border-radius:8px;font-size:13px;font-family:'Sora',sans-serif;cursor:pointer;transition:all .2s}
    .btn-outline:hover{border-color:var(--odoo-primary);color:var(--odoo-accent)}

    /* â”€â”€ TOOLBAR â”€â”€ */
    .toolbar{padding:16px 28px 0;display:flex;align-items:center;gap:10px;flex-wrap:wrap}
    .toolbar-btn{background:var(--bg-card);border:1px solid var(--border);color:var(--text-secondary);padding:8px 14px;border-radius:8px;font-size:12px;font-family:'Sora',sans-serif;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:6px}
    .toolbar-btn:hover,.toolbar-btn.active{border-color:var(--odoo-accent);color:var(--odoo-accent);background:rgba(0,197,205,.06)}
    .toolbar-sep{width:1px;height:24px;background:var(--border)}

    /* â”€â”€ KPI CARDS â”€â”€ */
    .kpi-row{padding:20px 28px;display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
    .kpi-card{background:var(--bg-card);border:1px solid var(--border);border-radius:12px;padding:20px 22px;position:relative;overflow:hidden;transition:border-color .2s,transform .2s;cursor:default}
    .kpi-card:hover{border-color:var(--border-bright);transform:translateY(-2px)}
    .kpi-card::before{content:'';position:absolute;top:0;left:0;width:100%;height:3px}
    .kpi-card.fuel::before{background:linear-gradient(90deg,var(--odoo-gold),#f5c842)}
    .kpi-card.roi::before{background:linear-gradient(90deg,var(--success),#5CDB95)}
    .kpi-card.util::before{background:linear-gradient(90deg,var(--odoo-accent),var(--odoo-primary))}
    .kpi-card::after{content:'';position:absolute;top:-30px;right:-30px;width:100px;height:100px;border-radius:50%;opacity:.04}
    .kpi-card.fuel::after{background:var(--odoo-gold)}
    .kpi-card.roi::after{background:var(--success)}
    .kpi-card.util::after{background:var(--odoo-accent)}
    .kpi-label{font-size:11px;color:var(--text-muted);text-transform:uppercase;letter-spacing:1px;font-family:'IBM Plex Mono',monospace;margin-bottom:10px;display:flex;align-items:center;gap:6px}
    .kpi-icon{font-size:13px}
    .kpi-value{font-size:32px;font-weight:700;line-height:1;letter-spacing:-1px}
    .kpi-card.fuel  .kpi-value{color:var(--odoo-gold)}
    .kpi-card.roi   .kpi-value{color:var(--success)}
    .kpi-card.util  .kpi-value{color:var(--odoo-accent)}
    .kpi-sub{font-size:12px;color:var(--text-muted);margin-top:8px;display:flex;align-items:center;gap:5px}
    .kpi-trend{font-size:11px;font-weight:600;padding:2px 7px;border-radius:10px}
    .trend-up{background:rgba(39,174,96,.15);color:#5CDB95}
    .trend-down{background:rgba(231,76,60,.15);color:var(--danger)}

    /* â”€â”€ CHARTS GRID â”€â”€ */
    .charts-grid{padding:0 28px;display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:20px}
    .chart-card{background:var(--bg-card);border:1px solid var(--border);border-radius:12px;padding:20px;position:relative;overflow:hidden}
    .chart-card:hover{border-color:var(--border-bright)}
    .chart-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}
    .chart-title{font-size:13px;font-weight:600;color:var(--text-primary);display:flex;align-items:center;gap:8px}
    .chart-title-dot{width:8px;height:8px;border-radius:50%}
    .chart-badge{font-size:10px;font-family:'IBM Plex Mono',monospace;padding:3px 8px;border-radius:6px;background:rgba(0,197,205,.08);color:var(--odoo-accent);border:1px solid rgba(0,197,205,.15)}
    .chart-body{position:relative;height:220px}

    /* â”€â”€ SECTION TITLE â”€â”€ */
    .section-title-wrap{padding:0 28px;margin-bottom:16px;display:flex;align-items:center;gap:14px}
    .section-title{font-size:15px;font-weight:700;color:var(--text-primary);font-family:'IBM Plex Mono',monospace;display:flex;align-items:center;gap:8px}
    .section-title-line{flex:1;height:1px;background:var(--border)}

    /* â”€â”€ FINANCIAL TABLE â”€â”€ */
    .table-wrap{padding:0 28px 28px}
    .table-container{background:var(--bg-card);border:1px solid var(--border);border-radius:12px;overflow:hidden}
    table{width:100%;border-collapse:collapse}
    thead{background:var(--bg-surface);border-bottom:1px solid var(--border)}
    th{padding:12px 18px;text-align:left;font-size:11px;font-family:'IBM Plex Mono',monospace;color:var(--text-muted);text-transform:uppercase;letter-spacing:1px;cursor:pointer;white-space:nowrap;user-select:none;transition:color .2s}
    th:hover{color:var(--odoo-accent)}
    th .si{margin-left:4px;opacity:.4}
    tbody tr{border-bottom:1px solid var(--border);transition:background .15s;cursor:pointer}
    tbody tr:last-child{border-bottom:none}
    tbody tr:hover{background:var(--bg-hover)}
    td{padding:14px 18px;font-size:13px;vertical-align:middle}
    .month-badge{display:inline-flex;align-items:center;background:rgba(113,75,103,.18);border:1px solid rgba(113,75,103,.35);color:#C89BC0;padding:4px 12px;border-radius:6px;font-family:'IBM Plex Mono',monospace;font-size:12px;font-weight:600;letter-spacing:1px}
    .revenue-val{font-family:'IBM Plex Mono',monospace;font-size:13px;font-weight:600;color:var(--odoo-accent)}
    .fuel-val{font-family:'IBM Plex Mono',monospace;font-size:13px;color:var(--odoo-gold)}
    .maint-val{font-family:'IBM Plex Mono',monospace;font-size:13px;color:var(--info)}
    .profit-val{font-family:'IBM Plex Mono',monospace;font-size:13px;font-weight:700}
    .profit-pos{color:var(--success)}
    .profit-neg{color:var(--danger)}
    .profit-bar-wrap{display:flex;align-items:center;gap:8px}
    .profit-bar{height:5px;border-radius:3px;min-width:4px;transition:width .4s}

    /* â”€â”€ SPARKLINE MINI â”€â”€ */
    .spark-wrap{display:flex;align-items:center;gap:6px}
    .spark-canvas{width:60px;height:24px}

    /* â”€â”€ PAGINATION â”€â”€ */
    .pager{padding:0 28px 10px;display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
    .pager-info{font-size:12px;color:var(--text-muted);font-family:'IBM Plex Mono',monospace}
    .pager-btns{display:flex;gap:4px}
    .pager-btn{min-width:32px;height:32px;border-radius:6px;border:1px solid var(--border);background:transparent;color:var(--text-secondary);font-size:12px;font-family:'IBM Plex Mono',monospace;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;padding:0 8px}
    .pager-btn:hover{border-color:var(--odoo-primary);color:var(--odoo-accent)}
    .pager-btn.active{background:var(--odoo-primary);border-color:var(--odoo-primary);color:#fff}
    .pager-btn:disabled{opacity:.3;cursor:not-allowed}

    /* â”€â”€ TOAST â”€â”€ */
    .toast{position:fixed;bottom:24px;right:24px;background:var(--bg-card);border:1px solid var(--success);color:var(--text-primary);padding:14px 20px;border-radius:10px;font-size:13px;display:flex;align-items:center;gap:10px;box-shadow:0 8px 32px rgba(0,0,0,.5),0 0 20px rgba(39,174,96,.2);z-index:2000;transform:translateX(120%);transition:transform .3s cubic-bezier(.34,1.56,.64,1)}
    .toast.show{transform:translateX(0)}
    .toast-icon{font-size:18px}

    /* â”€â”€ SCROLLBAR â”€â”€ */
    ::-webkit-scrollbar{width:6px;height:6px}
    ::-webkit-scrollbar-track{background:transparent}
    ::-webkit-scrollbar-thumb{background:var(--border-bright);border-radius:3px}
    ::-webkit-scrollbar-thumb:hover{background:var(--text-muted)}
  </style>
</head>
<body>

<!-- TOP NAV -->
<nav class="topnav">
  <a class="logo" href="#">
    <div class="logo-icon">ğŸš›</div>
    Fleet Flow
  </a>
  <div class="nav-links">
    <div class="nav-link">Dashboard</div>
    <div class="nav-link">Fleet</div>
    <div class="nav-link">Trips</div>
    <div class="nav-link">Drivers</div>
    <div class="nav-link">Maintenance</div>
    <div class="nav-link">Expenses</div>
    <div class="nav-link active">Reports</div>
  </div>
  <div class="nav-actions">
    <div style="font-size:18px;cursor:pointer;color:var(--text-muted)">ğŸ””</div>
    <div style="font-size:18px;cursor:pointer;color:var(--text-muted)">âš™ï¸</div>
    <div class="avatar">AD</div>
  </div>
</nav>

<div class="main">

  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="sidebar-section">Fleet</div>
    <div class="sidebar-item"><span class="icon">ğŸš—</span> Vehicles</div>
    <div class="sidebar-item"><span class="icon">ğŸ‘¤</span> Drivers</div>
    <div class="sidebar-item"><span class="icon">ğŸ“‹</span> Assignments</div>
    <div class="sidebar-section">Operations</div>
    <div class="sidebar-item"><span class="icon">ğŸ—ºï¸</span> Live Tracking</div>
    <div class="sidebar-item"><span class="icon">ğŸ“¦</span> Trips</div>
    <div class="sidebar-item"><span class="icon">â›½</span> Fuel Logs</div>
    <div class="sidebar-item"><span class="icon">ğŸ”§</span> Maintenance</div>
    <div class="sidebar-section">Finance & Analytics</div>
    <div class="sidebar-item active"><span class="icon">ğŸ“Š</span> Analytics</div>
    <div class="sidebar-item"><span class="icon">ğŸ“ˆ</span> Reports</div>
    <div class="sidebar-item"><span class="icon">ğŸ’°</span> Costs</div>
  </aside>

  <!-- MAIN CONTENT -->
  <main class="content">

    <!-- Page Header -->
    <div class="page-header">
      <div>
        <div class="breadcrumb">Fleet Flow / Finance / <span>Operational Analytics & Financial Reports</span></div>
        <h1 class="page-title">
          Operational Analytics &amp; Financial Reports
          <small>Fuel efficiency trends, vehicle costs, ROI &amp; monthly financial summaries</small>
        </h1>
      </div>
      <div class="header-actions">
        <button class="btn-outline" onclick="exportCSV()">â¬‡ Export CSV</button>
        <button class="btn-primary">ğŸ“„ Full Report</button>
      </div>
    </div>

    <!-- Toolbar -->
    <div class="toolbar">
      <button class="toolbar-btn active" onclick="setRange(this,'2025')">FY 2025</button>
      <button class="toolbar-btn" onclick="setRange(this,'Q4')">Q4 2025</button>
      <button class="toolbar-btn" onclick="setRange(this,'Q3')">Q3 2025</button>
      <button class="toolbar-btn" onclick="setRange(this,'Q2')">Q2 2025</button>
      <div class="toolbar-sep"></div>
      <button class="toolbar-btn" onclick="showToast()">âŠ Group by</button>
      <button class="toolbar-btn" onclick="showToast()">âš— Filter</button>
    </div>

    <!-- KPI Cards -->
    <div class="kpi-row">
      <div class="kpi-card fuel">
        <div class="kpi-label"><span class="kpi-icon">â›½</span> Total Fuel Cost</div>
        <div class="kpi-value">â‚¹2.6L</div>
        <div class="kpi-sub">
          <span class="kpi-trend trend-down">â†‘ 4.2%</span>
          vs last quarter
        </div>
      </div>
      <div class="kpi-card roi">
        <div class="kpi-label"><span class="kpi-icon">ğŸ“ˆ</span> Fleet ROI</div>
        <div class="kpi-value">+12.5%</div>
        <div class="kpi-sub">
          <span class="kpi-trend trend-up">â†‘ 2.1%</span>
          vs last quarter
        </div>
      </div>
      <div class="kpi-card util">
        <div class="kpi-label"><span class="kpi-icon">ğŸš›</span> Utilization Rate</div>
        <div class="kpi-value">82%</div>
        <div class="kpi-sub">
          <span class="kpi-trend trend-up">â†‘ 5%</span>
          fleet-wide average
        </div>
      </div>
    </div>

    <!-- Charts Grid -->
    <div class="charts-grid">
      <!-- Fuel Efficiency Trend -->
      <div class="chart-card">
        <div class="chart-header">
          <div class="chart-title">
            <div class="chart-title-dot" style="background:var(--odoo-accent)"></div>
            Fuel Efficiency Trend (km/L)
          </div>
          <span class="chart-badge">Jan â€“ Dec 2025</span>
        </div>
        <div class="chart-body">
          <canvas id="fuelTrendChart"></canvas>
        </div>
      </div>

      <!-- Top 5 Costliest Vehicles -->
      <div class="chart-card">
        <div class="chart-header">
          <div class="chart-title">
            <div class="chart-title-dot" style="background:var(--odoo-gold)"></div>
            Top 5 Costliest Vehicles
          </div>
          <span class="chart-badge">Total Cost â‚¹L</span>
        </div>
        <div class="chart-body">
          <canvas id="costlyVehiclesChart"></canvas>
        </div>
      </div>
    </div>

    <!-- Financial Summary Section -->
    <div class="section-title-wrap">
      <div class="section-title">ğŸ’° Financial Summary of Month</div>
      <div class="section-title-line"></div>
    </div>

    <div class="table-wrap">
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th onclick="sortTable('month')">Month <span class="si">â†•</span></th>
              <th onclick="sortTable('revenue')">Revenue <span class="si">â†•</span></th>
              <th onclick="sortTable('fuelCost')">Fuel Cost <span class="si">â†•</span></th>
              <th onclick="sortTable('maintenance')">Maintenance <span class="si">â†•</span></th>
              <th onclick="sortTable('netProfit')">Net Profit <span class="si">â†•</span></th>
              <th>Profit Trend</th>
            </tr>
          </thead>
          <tbody id="finTable"></tbody>
        </table>
      </div>
    </div>

    <div class="pager">
      <div class="pager-info" id="pagerInfo">Showing 0 of 0</div>
      <div class="pager-btns" id="pagerBtns"></div>
    </div>

  </main>
</div>

<!-- TOAST -->
<div class="toast" id="toast">
  <span class="toast-icon">âœ…</span>
  <div>
    <div style="font-weight:600;font-size:13px" id="toastMsg">Done!</div>
    <div style="font-size:11px;color:var(--text-secondary)">Action completed.</div>
  </div>
</div>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FINANCIAL DATA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const finData = [
  { month:'Jan', revenue:17, fuelCost:6,  maintenance:2, netProfit:9  },
  { month:'Feb', revenue:19, fuelCost:6.5,maintenance:1.5,netProfit:11 },
  { month:'Mar', revenue:22, fuelCost:7,  maintenance:3, netProfit:12 },
  { month:'Apr', revenue:18, fuelCost:5.5,maintenance:2, netProfit:10.5},
  { month:'May', revenue:24, fuelCost:8,  maintenance:2.5,netProfit:13.5},
  { month:'Jun', revenue:21, fuelCost:7.2,maintenance:1.8,netProfit:12 },
  { month:'Jul', revenue:26, fuelCost:8.5,maintenance:3.2,netProfit:14.3},
  { month:'Aug', revenue:23, fuelCost:7.8,maintenance:2.8,netProfit:12.4},
  { month:'Sep', revenue:20, fuelCost:6.8,maintenance:2.2,netProfit:11 },
  { month:'Oct', revenue:28, fuelCost:9,  maintenance:3.5,netProfit:15.5},
  { month:'Nov', revenue:25, fuelCost:8.2,maintenance:3,  netProfit:13.8},
  { month:'Dec', revenue:30, fuelCost:10, maintenance:4,  netProfit:16 },
];

let sortKey='month', sortAsc=true, currentPage=1;
const PER_PAGE=6;

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TABLE RENDER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function getDisplayData(){
  const data=[...finData];
  if(sortKey){
    data.sort((a,b)=>{
      let va=a[sortKey],vb=b[sortKey];
      if(typeof va==='string'){va=va.toLowerCase();vb=vb.toLowerCase();}
      return (va<vb?-1:va>vb?1:0)*(sortAsc?1:-1);
    });
  }
  return data;
}

function renderTable(){
  const data=getDisplayData();
  const pages=Math.max(1,Math.ceil(data.length/PER_PAGE));
  if(currentPage>pages) currentPage=pages;
  const slice=data.slice((currentPage-1)*PER_PAGE,currentPage*PER_PAGE);
  const maxProfit=Math.max(...finData.map(d=>Math.abs(d.netProfit)));
  const tbody=document.getElementById('finTable');
  tbody.innerHTML='';
  slice.forEach(d=>{
    const isPos=d.netProfit>=0;
    const barW=Math.round((Math.abs(d.netProfit)/maxProfit)*80);
    const barColor=isPos?'var(--success)':'var(--danger)';
    const tr=document.createElement('tr');
    tr.innerHTML=`
      <td><span class="month-badge">${d.month} 2025</span></td>
      <td><span class="revenue-val">â‚¹${d.revenue}L</span></td>
      <td><span class="fuel-val">â‚¹${d.fuelCost}L</span></td>
      <td><span class="maint-val">â‚¹${d.maintenance}L</span></td>
      <td><span class="profit-val ${isPos?'profit-pos':'profit-neg'}">${isPos?'+':''}â‚¹${d.netProfit}L</span></td>
      <td>
        <div class="profit-bar-wrap">
          <div class="profit-bar" style="width:${barW}px;background:${barColor}"></div>
          <span style="font-size:11px;color:var(--text-muted);font-family:'IBM Plex Mono',monospace">${Math.round((d.netProfit/d.revenue)*100)}%</span>
        </div>
      </td>`;
    tbody.appendChild(tr);
  });
  renderPager(pages,data.length,slice.length,(currentPage-1)*PER_PAGE);
}

function sortTable(key){
  sortKey===key?sortAsc=!sortAsc:(sortKey=key,sortAsc=true);
  renderTable();
}

function renderPager(pages,total,shown,offset){
  document.getElementById('pagerInfo').textContent=`Showing ${offset+1}â€“${offset+shown} of ${total} months`;
  const c=document.getElementById('pagerBtns');c.innerHTML='';
  const prev=mkBtn('â€¹');prev.disabled=currentPage===1;prev.onclick=()=>{currentPage--;renderTable();};c.appendChild(prev);
  for(let p=1;p<=pages;p++){const b=mkBtn(p,p===currentPage);b.onclick=(n=>()=>{currentPage=n;renderTable();})(p);c.appendChild(b);}
  const next=mkBtn('â€º');next.disabled=currentPage===pages;next.onclick=()=>{currentPage++;renderTable();};c.appendChild(next);
}
function mkBtn(t,active=false){const b=document.createElement('button');b.textContent=t;b.className='pager-btn'+(active?' active':'');return b;}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CHART.JS â€“ FUEL TREND
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function buildFuelChart(){
  const labels=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
  const series1=[8.2,7.9,8.5,8.1,9.0,8.7,7.6,8.3,9.1,8.8,9.3,10.0];
  const series2=[6.0,6.3,7.0,6.8,7.5,7.2,6.5,7.1,7.8,7.5,8.0,8.6];
  const ctx=document.getElementById('fuelTrendChart').getContext('2d');
  new Chart(ctx,{
    type:'line',
    data:{
      labels,
      datasets:[
        {
          label:'Fleet A',
          data:series1,
          borderColor:'#00C5CD',
          backgroundColor:'rgba(0,197,205,.08)',
          borderWidth:2,
          pointBackgroundColor:'#00C5CD',
          pointRadius:3,
          pointHoverRadius:6,
          tension:.4,
          fill:true,
        },
        {
          label:'Fleet B',
          data:series2,
          borderColor:'#714B67',
          backgroundColor:'rgba(113,75,103,.08)',
          borderWidth:2,
          pointBackgroundColor:'#714B67',
          pointRadius:3,
          pointHoverRadius:6,
          tension:.4,
          fill:true,
        }
      ]
    },
    options:{
      responsive:true,maintainAspectRatio:false,
      plugins:{
        legend:{
          display:true,
          labels:{color:'#888',font:{family:'IBM Plex Mono',size:11},boxWidth:10,padding:14}
        },
        tooltip:{
          backgroundColor:'#1A1A1A',
          borderColor:'#2A2A2A',
          borderWidth:1,
          titleColor:'#F0F0F0',
          bodyColor:'#888',
          titleFont:{family:'IBM Plex Mono',size:11},
          bodyFont:{family:'Sora',size:12},
          padding:10,
        }
      },
      scales:{
        x:{
          grid:{color:'rgba(255,255,255,.04)'},
          ticks:{color:'#555',font:{family:'IBM Plex Mono',size:10}}
        },
        y:{
          grid:{color:'rgba(255,255,255,.04)'},
          ticks:{color:'#555',font:{family:'IBM Plex Mono',size:10},callback:v=>v+' km/L'},
          beginAtZero:false,
        }
      }
    }
  });
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CHART.JS â€“ COSTLIEST VEHICLES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function buildCostChart(){
  const labels=['VAN-03','TRK-01','TRK-02','TRK-05','VAN-01'];
  const costs=[22,88,65,95,41];
  const colors=['#2980B9','#F0A500','#017E84','#714B67','#27AE60'];
  const ctx=document.getElementById('costlyVehiclesChart').getContext('2d');
  new Chart(ctx,{
    type:'bar',
    data:{
      labels,
      datasets:[{
        label:'Total Cost (â‚¹K)',
        data:costs,
        backgroundColor:colors.map(c=>c+'33'),
        borderColor:colors,
        borderWidth:2,
        borderRadius:5,
        borderSkipped:false,
      }]
    },
    options:{
      responsive:true,maintainAspectRatio:false,
      plugins:{
        legend:{display:false},
        tooltip:{
          backgroundColor:'#1A1A1A',borderColor:'#2A2A2A',borderWidth:1,
          titleColor:'#F0F0F0',bodyColor:'#888',
          titleFont:{family:'IBM Plex Mono',size:11},bodyFont:{family:'Sora',size:12},
          padding:10,
          callbacks:{label:ctx=>'â‚¹'+ctx.parsed.y+'K'}
        }
      },
      scales:{
        x:{grid:{color:'rgba(255,255,255,.04)'},ticks:{color:'#555',font:{family:'IBM Plex Mono',size:10}}},
        y:{
          grid:{color:'rgba(255,255,255,.04)'},
          ticks:{color:'#555',font:{family:'IBM Plex Mono',size:10},callback:v=>'â‚¹'+v+'K'},
          beginAtZero:true,
        }
      }
    }
  });
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOOLBAR RANGE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function setRange(btn,range){
  document.querySelectorAll('.toolbar-btn').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   EXPORT CSV
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function exportCSV(){
  const rows=[['Month','Revenue (L)','Fuel Cost (L)','Maintenance (L)','Net Profit (L)'],
    ...finData.map(d=>[d.month+' 2025',d.revenue,d.fuelCost,d.maintenance,d.netProfit])];
  const csv=rows.map(r=>r.map(v=>'"'+v+'"').join(',')).join('\n');
  const a=document.createElement('a');
  a.href='data:text/csv;charset=utf-8,'+encodeURIComponent(csv);
  a.download='fleet_financial_report.csv';a.click();
  showToast('CSV Exported','Financial report downloaded successfully.');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOAST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let toastTimer;
function showToast(title='Feature Coming Soon',sub='This will be available shortly.'){
  document.getElementById('toastMsg').textContent=title;
  const t=document.getElementById('toast');
  t.classList.add('show');
  clearTimeout(toastTimer);
  toastTimer=setTimeout(()=>t.classList.remove('show'),3000);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INIT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
buildFuelChart();
buildCostChart();
renderTable();
</script>
</body>
</html>
