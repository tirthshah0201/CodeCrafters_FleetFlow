/* ══════════════════════════════════════════════════════════════
   FleetFlow — styles.css
   Enterprise SaaS Design System
   Palette: Purple rgb(113,75,103) · Silver #8F8F8F · Dark/Light
══════════════════════════════════════════════════════════════ */

@import url('https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600;700;800&family=Manrope:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');

/* ── TOKENS ───────────────────────────────────────────────── */
:root {
  /* Brand */
  --purple:      rgb(113, 75, 103);
  --purple-l:    rgb(150, 105, 138);
  --purple-d:    rgb(80, 50, 72);
  --purple-gl:   rgba(113, 75, 103, 0.15);
  --purple-gm:   rgba(113, 75, 103, 0.25);
  --silver:      #8F8F8F;

  /* Dark Theme (default) */
  --bg:          #0d0f18;
  --bg2:         #121520;
  --surface:     #191c2a;
  --surface2:    #202435;
  --surface3:    #272b3f;
  --border:      rgba(255,255,255,0.06);
  --border2:     rgba(255,255,255,0.11);
  --text:        #eef0f8;
  --text2:       #8a8fa8;
  --text3:       #3e4460;
  --shadow:      0 4px 24px rgba(0,0,0,0.4);
  --shadow-lg:   0 8px 48px rgba(0,0,0,0.55);
  --shadow-card: 0 2px 12px rgba(0,0,0,0.3);

  /* Status colors */
  --green:   #2ecc8f; --gbg: rgba(46,204,143,.12);  --gbd: rgba(46,204,143,.25);
  --orange:  #ff8f4c; --obg: rgba(255,143,76,.12);  --obd: rgba(255,143,76,.25);
  --blue:    #4fa3f7; --bbg: rgba(79,163,247,.12);  --bbd: rgba(79,163,247,.25);
  --red:     #ff4d6a; --rbg: rgba(255,77,106,.12);  --rbd: rgba(255,77,106,.25);
  --yellow:  #f5c542; --ybg: rgba(245,197,66,.12);  --ybd: rgba(245,197,66,.25);
  --teal:    #2ec4b6; --tbg: rgba(46,196,182,.12);  --tbd: rgba(46,196,182,.25);

  /* Dimensions */
  --sidebar-w: 230px;
  --topbar-h:  58px;
  --r:  14px;
  --rs: 8px;
  --rxs: 5px;

  /* Typography */
  --font-display: 'Syne', sans-serif;
  --font:         'Manrope', sans-serif;
  --mono:         'JetBrains Mono', monospace;

  --ease: all .2s cubic-bezier(.4,0,.2,1);
}

/* Light theme */
[data-theme="light"] {
  --bg:       #f2f4fa;
  --bg2:      #ffffff;
  --surface:  #ffffff;
  --surface2: #f5f6fb;
  --surface3: #eceef7;
  --border:   rgba(0,0,0,0.07);
  --border2:  rgba(0,0,0,0.12);
  --text:     #141620;
  --text2:    #5a5f7a;
  --text3:    #b0b4cc;
  --shadow:      0 4px 24px rgba(0,0,0,0.08);
  --shadow-lg:   0 8px 48px rgba(0,0,0,0.12);
  --shadow-card: 0 2px 12px rgba(0,0,0,0.06);
}

/* ── RESET ────────────────────────────────────────────────── */
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
html { font-size: 14px; }
body {
  font-family: var(--font);
  background: var(--bg);
  color: var(--text);
  min-height: 100vh;
  line-height: 1.6;
  overflow: hidden;
}

a { text-decoration: none; color: inherit; }
button { font-family: var(--font); cursor: pointer; border: none; outline: none; }
input, select, textarea { font-family: var(--font); outline: none; color: var(--text); }
::-webkit-scrollbar { width: 5px; height: 5px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--surface3); border-radius: 99px; }

/* ── APP LAYOUT ───────────────────────────────────────────── */
.app-layout {
  display: flex;
  height: 100vh;
  overflow: hidden;
}

/* ── SIDEBAR ──────────────────────────────────────────────── */
.sidebar {
  width: var(--sidebar-w);
  flex-shrink: 0;
  background: var(--bg2);
  border-right: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  height: 100vh;
  position: sticky;
  top: 0;
  transition: width .25s ease, transform .25s ease;
  z-index: 100;
}
.sidebar.collapsed { width: 60px; }
.sidebar.collapsed .brand-text,
.sidebar.collapsed .su-info,
.sidebar.collapsed .snav-section,
.sidebar.collapsed .snav-item span:not(.sni),
.sidebar.collapsed .snav-badge,
.sidebar.collapsed .live-dot,
.sidebar.collapsed .sidebar-footer > * > span:not(:first-child) { display: none; }
.sidebar.collapsed .snav-item { justify-content: center; padding: 10px; }

.sidebar-brand {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 18px 16px 14px;
  border-bottom: 1px solid var(--border);
}
.brand-logo {
  width: 36px; height: 36px; flex-shrink: 0;
  background: linear-gradient(135deg, var(--purple-d), var(--purple));
  border-radius: 10px;
  display: flex; align-items: center; justify-content: center;
  color: #fff;
  box-shadow: 0 4px 14px rgba(113,75,103,0.4);
}
.brand-text {
  font-family: var(--font-display);
  font-size: 18px; font-weight: 700;
  color: var(--text);
  letter-spacing: -.3px;
}
.brand-text span { color: var(--purple-l); }

.sidebar-toggle {
  margin-left: auto;
  background: none; color: var(--text2);
  font-size: 16px; padding: 4px 6px;
  border-radius: var(--rxs);
  transition: var(--ease);
}
.sidebar-toggle:hover { background: var(--surface2); color: var(--text); }

.sidebar-user {
  display: flex; align-items: center; gap: 10px;
  padding: 14px 16px;
  border-bottom: 1px solid var(--border);
}
.su-avatar {
  width: 36px; height: 36px; border-radius: 50%; flex-shrink: 0;
  background: linear-gradient(135deg, var(--purple), var(--purple-l));
  display: flex; align-items: center; justify-content: center;
  font-size: 12px; font-weight: 700; color: #fff;
}
.su-name { font-size: 13px; font-weight: 600; color: var(--text); }
.su-role {
  display: flex; align-items: center; gap: 5px;
  font-size: 11px; color: var(--text2);
}
.role-dot {
  width: 6px; height: 6px; border-radius: 50%;
  background: var(--green);
  animation: pulse 2s infinite;
}
@keyframes pulse { 0%,100%{opacity:1;} 50%{opacity:.4;} }

.sidebar-nav {
  flex: 1; overflow-y: auto;
  padding: 10px 0;
}
.snav-section {
  font-size: 9px; font-weight: 700;
  letter-spacing: 1.5px; color: var(--text3);
  padding: 12px 16px 5px;
  text-transform: uppercase;
}
.snav-item {
  display: flex; align-items: center; gap: 10px;
  padding: 9px 16px;
  font-size: 13px; font-weight: 500;
  color: var(--text2);
  cursor: pointer;
  border-left: 3px solid transparent;
  transition: var(--ease);
  user-select: none;
}
.snav-item:hover { background: rgba(113,75,103,0.07); color: var(--text); }
.snav-item.active {
  background: rgba(113,75,103,0.12);
  color: var(--purple-l);
  border-left-color: var(--purple);
  font-weight: 600;
}
.sni {
  width: 18px; display: flex; align-items: center; justify-content: center;
  flex-shrink: 0;
}
.snav-badge {
  margin-left: auto;
  background: var(--orange);
  color: #fff; font-size: 10px; font-weight: 700;
  padding: 1px 7px; border-radius: 99px;
  min-width: 20px; text-align: center;
}
.live-dot {
  margin-left: auto;
  width: 7px; height: 7px; border-radius: 50%;
  background: var(--green);
  animation: pulse 1.5s infinite;
}

.sidebar-footer {
  padding: 12px;
  border-top: 1px solid var(--border);
  display: flex; flex-direction: column; gap: 6px;
}
.theme-toggle, .logout-btn {
  display: flex; align-items: center; gap: 8px;
  padding: 8px 10px;
  border-radius: var(--rs);
  font-size: 12px; font-weight: 600;
  transition: var(--ease);
  width: 100%;
}
.theme-toggle { background: var(--surface2); color: var(--text2); }
.theme-toggle:hover { background: var(--surface3); color: var(--text); }
.logout-btn { background: var(--rbg); color: var(--red); border: 1px solid var(--rbd); }
.logout-btn:hover { background: var(--red); color: #fff; }

/* ── MAIN WRAPPER ─────────────────────────────────────────── */
.main-wrapper {
  flex: 1; display: flex; flex-direction: column;
  overflow: hidden;
}

/* ── TOP HEADER ───────────────────────────────────────────── */
.top-header {
  height: var(--topbar-h);
  flex-shrink: 0;
  background: var(--bg2);
  border-bottom: 1px solid var(--border);
  display: flex; align-items: center; justify-content: space-between;
  padding: 0 24px; gap: 16px;
}
.header-left { display: flex; align-items: center; gap: 12px; }
.mob-menu-btn {
  display: none;
  background: var(--surface2); border: 1px solid var(--border2);
  color: var(--text2); padding: 6px 10px; border-radius: var(--rs);
  font-size: 16px;
}
.breadcrumb {
  font-family: var(--font-display);
  font-size: 18px; font-weight: 700;
  color: var(--text);
}

.header-right { display: flex; align-items: center; gap: 10px; }
.hdr-search {
  display: flex; align-items: center; gap: 8px;
  background: var(--surface); border: 1px solid var(--border2);
  border-radius: var(--rs); padding: 7px 12px;
  min-width: 220px;
}
.hdr-search input {
  background: none; border: none; font-size: 13px; color: var(--text);
  width: 100%;
}
.hdr-search input::placeholder { color: var(--text3); }

.notif-btn {
  position: relative;
  width: 36px; height: 36px; border-radius: var(--rs);
  background: var(--surface); border: 1px solid var(--border2);
  display: flex; align-items: center; justify-content: center;
  font-size: 16px; cursor: pointer; transition: var(--ease);
}
.notif-btn:hover { border-color: var(--purple); }
.notif-count {
  position: absolute; top: -4px; right: -4px;
  background: var(--red); color: #fff;
  font-size: 9px; font-weight: 700;
  width: 16px; height: 16px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  border: 2px solid var(--bg2);
}
.hdr-role-pill {
  background: var(--purple-gl);
  border: 1px solid var(--purple-gm);
  color: var(--purple-l);
  font-size: 11px; font-weight: 700;
  padding: 5px 12px; border-radius: 99px;
}
.new-trip-btn {
  background: linear-gradient(135deg, var(--purple-d), var(--purple));
  color: #fff;
  font-size: 13px; font-weight: 700;
  padding: 8px 18px; border-radius: var(--rs);
  box-shadow: 0 4px 16px rgba(113,75,103,0.4);
  transition: var(--ease);
}
.new-trip-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 24px rgba(113,75,103,0.55);
}

/* ── PAGES ────────────────────────────────────────────────── */
.pages-container {
  flex: 1; overflow-y: auto;
  padding: 22px 24px 40px;
}
.page { display: none; }
.page.active { display: block; animation: pageIn .35s ease; }
@keyframes pageIn {
  from { opacity: 0; transform: translateY(10px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* ── KPI ROW ──────────────────────────────────────────────── */
.kpi-row {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 14px;
  margin-bottom: 18px;
}
.kpi-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--r);
  padding: 16px 18px;
  position: relative; overflow: hidden;
  transition: var(--ease);
  animation: fadeUp .4s ease both;
}
.kpi-card::before {
  content: '';
  position: absolute; top: 0; left: 0; right: 0; height: 2px;
  background: var(--kpi-ac, var(--purple));
  opacity: 0; transition: opacity .25s;
}
.kpi-card:hover { transform: translateY(-3px); box-shadow: var(--shadow); border-color: var(--border2); }
.kpi-card:hover::before { opacity: 1; }

.kpi-top { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 10px; }
.kpi-icon {
  width: 34px; height: 34px; border-radius: 9px;
  display: flex; align-items: center; justify-content: center;
  font-size: 16px;
}
.kpi-delta {
  font-size: 10px; font-weight: 600; font-family: var(--mono);
  padding: 2px 7px; border-radius: 99px;
}
.kpi-delta.up { background: var(--gbg); color: var(--green); }
.kpi-delta.dn { background: var(--rbg); color: var(--red); }
.kpi-delta.nt { background: var(--ybg); color: var(--yellow); }
.kpi-val {
  font-size: 30px; font-weight: 700; font-family: var(--mono);
  letter-spacing: -1.5px; line-height: 1; margin-bottom: 3px;
}
.kpi-lbl { font-size: 11px; font-weight: 600; color: var(--text2); margin-bottom: 4px; }
.kpi-desc { font-size: 10px; color: var(--text3); }
.kpi-bar { height: 3px; background: var(--border); border-radius: 99px; overflow: hidden; margin-top: 10px; }
.kpi-bar-fill { height: 100%; border-radius: 99px; animation: barFill 1.1s ease .3s both; }
@keyframes barFill { from { width: 0% !important; } }

/* ── AI BANNER ────────────────────────────────────────────── */
.ai-banner {
  background: linear-gradient(135deg, rgba(113,75,103,0.15), rgba(80,50,72,0.08));
  border: 1px solid rgba(113,75,103,0.3);
  border-radius: var(--r);
  padding: 14px 20px;
  display: flex; align-items: center; justify-content: space-between;
  gap: 16px; margin-bottom: 18px;
  animation: fadeUp .4s ease .15s both;
}
.ai-banner-left { display: flex; align-items: center; gap: 14px; }
.ai-icon { font-size: 28px; animation: spin 8s linear infinite; }
@keyframes spin { 0%{transform:rotate(0)} 100%{transform:rotate(360deg)} }
.ai-title { font-size: 13px; font-weight: 700; color: var(--purple-l); margin-bottom: 2px; }
.ai-msg { font-size: 12px; color: var(--text2); }
.ai-actions { display: flex; gap: 8px; flex-shrink: 0; }
.ai-btn {
  padding: 7px 14px; border-radius: var(--rs);
  font-size: 12px; font-weight: 600;
  border: 1px solid rgba(113,75,103,0.4);
  background: transparent; color: var(--purple-l);
  transition: var(--ease);
}
.ai-btn:hover { background: rgba(113,75,103,0.15); }
.ai-btn.ai-btn-pri {
  background: var(--purple); color: #fff; border-color: var(--purple);
  box-shadow: 0 3px 12px rgba(113,75,103,0.35);
}
.ai-btn.ai-btn-pri:hover { background: var(--purple-l); }

/* ── SECTION CARD ─────────────────────────────────────────── */
.section-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--r);
  overflow: hidden;
  animation: fadeUp .4s ease .1s both;
}
.sc-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 14px 20px;
  border-bottom: 1px solid var(--border);
  flex-wrap: wrap; gap: 10px;
}
.sc-title { font-size: 14px; font-weight: 700; font-family: var(--font-display); }
.sc-sub { font-size: 11px; color: var(--text2); font-family: var(--mono); margin-top: 2px; }
.sc-actions { display: flex; gap: 8px; }

/* ── FILTER BAR ───────────────────────────────────────────── */
.filter-bar {
  display: flex; align-items: center; gap: 10px;
  padding: 12px 20px;
  border-bottom: 1px solid var(--border);
  flex-wrap: wrap;
  background: var(--surface2);
}
.fb-search {
  display: flex; align-items: center; gap: 7px;
  background: var(--surface); border: 1px solid var(--border2);
  border-radius: var(--rs); padding: 7px 11px;
  flex: 1; min-width: 180px; max-width: 280px;
}
.fbs-ico { font-size: 13px; }
.fb-inp {
  background: none; border: none; font-size: 13px; color: var(--text); width: 100%;
}
.fb-inp::placeholder { color: var(--text3); }
.fb-inp:focus + .fb-search { border-color: var(--purple); }

.fb-chips { display: flex; align-items: center; gap: 6px; flex-wrap: wrap; }
.fbc-label { font-size: 10px; font-weight: 700; color: var(--text3); text-transform: uppercase; letter-spacing: .8px; }
.chip {
  padding: 5px 12px; border-radius: 99px;
  font-size: 11px; font-weight: 600;
  border: 1px solid var(--border2); background: var(--surface);
  color: var(--text2); cursor: pointer; transition: var(--ease);
  user-select: none;
}
.chip:hover { border-color: var(--purple); color: var(--purple-l); }
.chip.active { background: var(--purple-gl); border-color: var(--purple); color: var(--purple-l); }

.fb-selects { display: flex; gap: 8px; flex-wrap: wrap; }
.fb-sel {
  padding: 6px 26px 6px 10px;
  background: var(--surface);
  border: 1px solid var(--border2);
  border-radius: var(--rs);
  font-size: 12px; font-weight: 600;
  color: var(--text2); cursor: pointer; transition: var(--ease);
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6'%3E%3Cpath d='M1 1l4 4 4-4' stroke='%238a8fa8' stroke-width='1.5' fill='none' stroke-linecap='round'/%3E%3C/svg%3E");
  background-repeat: no-repeat; background-position: right 8px center;
}
.fb-sel:focus { border-color: var(--purple); }

.clr-btn {
  padding: 5px 12px; border-radius: var(--rs);
  font-size: 11px; font-weight: 600;
  border: 1px solid var(--rbd); background: var(--rbg); color: var(--red);
  transition: var(--ease); white-space: nowrap;
}
.clr-btn:hover { background: var(--red); color: #fff; }

.filter-info {
  padding: 8px 20px;
  background: rgba(113,75,103,0.06);
  border-bottom: 1px solid rgba(113,75,103,0.2);
  display: flex; align-items: center; gap: 8px; flex-wrap: wrap;
  font-size: 12px; color: var(--purple-l); font-weight: 500;
}
.fi-tag {
  background: var(--purple-gl); border: 1px solid var(--purple-gm);
  padding: 2px 8px; border-radius: 99px;
  font-size: 10px; font-weight: 700;
}
.fi-count { margin-left: auto; color: var(--text3); font-family: var(--mono); font-size: 11px; }

/* ── FLEET TABLE ──────────────────────────────────────────── */
.table-wrap { overflow-x: auto; }

.fleet-table { width: 100%; border-collapse: collapse; }
.fleet-table thead th {
  padding: 9px 16px;
  font-size: 10px; font-weight: 700;
  text-transform: uppercase; letter-spacing: .9px;
  color: var(--text3); text-align: left;
  background: var(--bg2);
  border-bottom: 1px solid var(--border);
  white-space: nowrap;
}
.fleet-table tbody tr {
  border-bottom: 1px solid rgba(255,255,255,0.035);
  transition: background .15s; cursor: pointer;
}
[data-theme="light"] .fleet-table tbody tr {
  border-bottom: 1px solid rgba(0,0,0,0.05);
}
.fleet-table tbody tr:last-child { border-bottom: none; }
.fleet-table tbody tr:hover td { background: rgba(113,75,103,0.05); }
.fleet-table td { padding: 11px 16px; vertical-align: middle; }

/* table cells */
.tc-id {
  font-family: var(--mono); font-size: 12px; font-weight: 500;
  color: var(--purple-l);
  background: var(--purple-gl); border: 1px solid var(--purple-gm);
  padding: 2px 8px; border-radius: 5px; display: inline-block;
}
.tc-veh { display: flex; align-items: center; gap: 8px; }
.tc-veh-ico {
  width: 30px; height: 30px; border-radius: 8px; flex-shrink: 0;
  background: var(--surface2);
  display: flex; align-items: center; justify-content: center;
  font-size: 14px;
}
.tc-veh-name { font-size: 12px; font-weight: 700; color: var(--text); }
.tc-veh-type { font-size: 10px; color: var(--text2); font-family: var(--mono); }
.tc-driver { display: flex; align-items: center; gap: 7px; }
.tc-drv-av {
  width: 26px; height: 26px; border-radius: 50%; flex-shrink: 0;
  background: linear-gradient(135deg, var(--purple), var(--purple-l));
  display: flex; align-items: center; justify-content: center;
  font-size: 9px; font-weight: 700; color: #fff;
}
.tc-drv-name { font-size: 12px; color: var(--text); }
.tc-route { font-size: 12px; color: var(--text2); white-space: nowrap; }
.tc-arr { color: var(--purple-l); margin: 0 4px; }
.tc-cargo { font-size: 12px; color: var(--text2); white-space: nowrap; }
.tc-fuel {
  font-size: 12px; font-family: var(--mono);
  color: var(--green);
}
.tc-date { font-size: 11px; color: var(--text2); font-family: var(--mono); }

/* status badge */
.sbadge {
  display: inline-flex; align-items: center; gap: 5px;
  padding: 4px 10px; border-radius: 99px;
  font-size: 10px; font-weight: 700; white-space: nowrap;
}
.sbadge::before { content: ''; width: 5px; height: 5px; border-radius: 50%; }
.s-scheduled  { background: var(--ybg); color: var(--yellow); border: 1px solid var(--ybd); }
.s-scheduled::before  { background: var(--yellow); }
.s-dispatched { background: var(--bbg); color: var(--blue);   border: 1px solid var(--bbd); }
.s-dispatched::before { background: var(--blue); animation: pulse 1.5s infinite; }
.s-transit    { background: var(--obg); color: var(--orange); border: 1px solid var(--obd); }
.s-transit::before    { background: var(--orange); animation: pulse 1.5s infinite; }
.s-delivered  { background: var(--gbg); color: var(--green);  border: 1px solid var(--gbd); }
.s-delivered::before  { background: var(--green); }
.s-delayed    { background: var(--rbg); color: var(--red);    border: 1px solid var(--rbd); }
.s-delayed::before    { background: var(--red); animation: pulse .8s infinite; }

/* priority badge */
.pbadge {
  font-size: 10px; font-weight: 700; padding: 2px 8px; border-radius: 99px;
}
.p-normal  { background: var(--surface2); color: var(--text2); }
.p-high    { background: var(--obg); color: var(--orange); border: 1px solid var(--obd); }
.p-urgent  { background: var(--rbg); color: var(--red); border: 1px solid var(--rbd); }

/* action buttons */
.act-btn {
  padding: 4px 10px; border-radius: var(--rxs);
  font-size: 11px; font-weight: 600;
  transition: var(--ease); border: 1px solid var(--border2);
  background: var(--surface2); color: var(--text2);
}
.act-btn:hover { border-color: var(--purple); color: var(--purple-l); }
.act-btn.promote {
  background: var(--purple-gl); border-color: var(--purple-gm); color: var(--purple-l);
}
.act-btn.promote:hover { background: var(--purple); color: #fff; }
.act-view { color: var(--blue); }

/* empty state */
.empty-state {
  text-align: center; padding: 52px 20px;
}
.empty-state .es-ico { font-size: 42px; margin-bottom: 12px; }
.empty-state .es-title { font-size: 15px; font-weight: 600; color: var(--text2); margin-bottom: 4px; }
.empty-state .es-sub { font-size: 12px; color: var(--text3); }

/* ── SHARED BUTTON STYLES ─────────────────────────────────── */
.btn-primary {
  background: linear-gradient(135deg, var(--purple-d), var(--purple));
  color: #fff; border: none;
  padding: 10px 22px; border-radius: var(--rs);
  font-size: 13px; font-weight: 700;
  display: flex; align-items: center; gap: 8px;
  transition: var(--ease);
  box-shadow: 0 4px 16px rgba(113,75,103,0.35);
}
.btn-primary:hover { transform: translateY(-1px); box-shadow: 0 6px 22px rgba(113,75,103,0.5); }
.btn-ghost {
  background: var(--surface2); color: var(--text2);
  border: 1px solid var(--border2);
  padding: 10px 22px; border-radius: var(--rs);
  font-size: 13px; font-weight: 600;
  transition: var(--ease);
}
.btn-ghost:hover { border-color: var(--border2); color: var(--text); }
.icon-btn {
  background: var(--surface2); color: var(--text2);
  border: 1px solid var(--border2);
  padding: 7px 14px; border-radius: var(--rs);
  font-size: 12px; font-weight: 600;
  transition: var(--ease);
}
.icon-btn:hover { border-color: var(--purple-gm); color: var(--purple-l); }

/* ── MODAL ────────────────────────────────────────────────── */
.modal-overlay {
  position: fixed; inset: 0;
  background: rgba(0,0,0,.7);
  backdrop-filter: blur(4px);
  z-index: 200; display: none;
}
.modal-overlay.show { display: block; }

.modal {
  position: fixed;
  top: 50%; left: 50%;
  transform: translate(-50%, -60%);
  width: min(680px, 96vw);
  background: var(--bg2);
  border: 1px solid var(--border2);
  border-radius: 18px;
  z-index: 201; display: none;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: var(--shadow-lg);
  transition: transform .3s cubic-bezier(.34,1.56,.64,1), opacity .3s ease;
}
.modal.show {
  display: block;
  animation: modalIn .3s cubic-bezier(.34,1.56,.64,1);
}
@keyframes modalIn {
  from { opacity: 0; transform: translate(-50%, -55%) scale(.95); }
  to   { opacity: 1; transform: translate(-50%, -50%) scale(1); }
}
.modal.show { transform: translate(-50%, -50%); }

.modal-detail { width: min(760px, 96vw); }

.modal-header {
  display: flex; align-items: flex-start; justify-content: space-between;
  padding: 20px 24px 16px;
  border-bottom: 1px solid var(--border);
  position: sticky; top: 0;
  background: var(--bg2); z-index: 1;
}
.modal-tag {
  font-size: 10px; font-weight: 700;
  text-transform: uppercase; letter-spacing: 1px;
  color: var(--purple-l); margin-bottom: 4px;
}
.modal-title {
  font-family: var(--font-display);
  font-size: 20px; font-weight: 700; color: var(--text);
}
.modal-close {
  background: var(--surface2); border: 1px solid var(--border2);
  color: var(--text2); width: 30px; height: 30px;
  border-radius: var(--rs); font-size: 12px;
  display: flex; align-items: center; justify-content: center;
  transition: var(--ease); flex-shrink: 0;
}
.modal-close:hover { background: var(--rbg); color: var(--red); border-color: var(--rbd); }

.modal-body { padding: 20px 24px 24px; }

/* ── FORM ─────────────────────────────────────────────────── */
.form-row { display: flex; gap: 14px; }
.form-row.two > * { flex: 1; }
.form-field { margin-bottom: 14px; }
.form-field label {
  display: block; font-size: 12px; font-weight: 700;
  color: var(--text2); margin-bottom: 6px;
  text-transform: uppercase; letter-spacing: .5px;
}
.req { color: var(--red); }
.input-wrap { position: relative; }
.inp-ico {
  position: absolute; left: 12px; top: 50%; transform: translateY(-50%);
  font-size: 14px; pointer-events: none; z-index: 1;
}
.input-wrap input,
.input-wrap select,
.input-wrap textarea {
  width: 100%;
  padding: 10px 12px 10px 38px;
  background: var(--surface2);
  border: 1.5px solid var(--border2);
  border-radius: var(--rs);
  font-size: 13px; color: var(--text);
  transition: var(--ease);
}
.input-wrap input:focus,
.input-wrap select:focus,
.input-wrap textarea:focus {
  border-color: var(--purple);
  box-shadow: 0 0 0 3px var(--purple-gl);
  background: var(--surface);
}
.input-wrap select { appearance: none; cursor: pointer; }
.input-wrap textarea { resize: vertical; padding-top: 12px; }
.input-wrap.err input,
.input-wrap.err select { border-color: var(--red); }
.field-err {
  font-size: 11px; color: var(--red); margin-top: 4px;
  font-weight: 600; display: none;
}
.field-err.show { display: block; }
.field-hint {
  font-size: 11px; color: var(--text2); margin-top: 4px;
  font-style: italic;
}

/* Capacity warning */
.capacity-alert {
  display: flex; align-items: flex-start; gap: 12px;
  background: var(--rbg); border: 1px solid var(--rbd);
  border-radius: var(--rs); padding: 12px 16px;
  margin-bottom: 14px; animation: fadeUp .3s ease;
}
.cap-icon { font-size: 20px; flex-shrink: 0; }
.cap-title { font-size: 13px; font-weight: 700; color: var(--red); margin-bottom: 2px; }
.cap-msg { font-size: 12px; color: var(--text2); }

/* Fuel panel */
.fuel-panel {
  background: linear-gradient(135deg, rgba(113,75,103,0.1), rgba(80,50,72,0.05));
  border: 1px solid var(--purple-gm);
  border-radius: var(--rs); padding: 14px;
  margin-bottom: 14px; animation: fadeUp .3s ease;
}
.fuel-panel-title { font-size: 12px; font-weight: 700; color: var(--purple-l); margin-bottom: 10px; }
.fuel-row { display: flex; gap: 12px; }
.fuel-item { flex: 1; text-align: center; }
.fi-val {
  font-size: 20px; font-weight: 700; font-family: var(--mono);
  color: var(--purple-l); letter-spacing: -1px;
}
.fi-lbl { font-size: 10px; color: var(--text3); margin-top: 2px; font-weight: 600; }

.form-actions {
  display: flex; justify-content: flex-end; gap: 10px;
  padding-top: 16px; border-top: 1px solid var(--border);
  margin-top: 8px;
}
.btn-ico { font-size: 14px; }

/* ── TRIP LIFECYCLE TRACKER ───────────────────────────────── */
.lifecycle-track {
  display: flex; align-items: center; gap: 0;
  padding: 20px 24px;
}
.lc-step {
  display: flex; flex-direction: column; align-items: center; gap: 6px;
  flex: 1; position: relative;
}
.lc-step:not(:last-child)::after {
  content: '';
  position: absolute; top: 16px; left: calc(50% + 16px);
  right: calc(-50% + 16px);
  height: 2px; background: var(--border2);
}
.lc-step.done:not(:last-child)::after { background: var(--purple); }
.lc-step.active:not(:last-child)::after { background: var(--border2); }
.lc-dot {
  width: 32px; height: 32px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-size: 14px;
  border: 2px solid var(--border2);
  background: var(--surface2);
  position: relative; z-index: 1;
}
.lc-step.done .lc-dot { background: var(--purple); border-color: var(--purple); }
.lc-step.active .lc-dot {
  background: var(--purple-d); border-color: var(--purple);
  box-shadow: 0 0 0 4px var(--purple-gl);
  animation: pulse 1.5s infinite;
}
.lc-label { font-size: 10px; font-weight: 600; color: var(--text3); text-align: center; }
.lc-step.done .lc-label,
.lc-step.active .lc-label { color: var(--purple-l); }

/* detail sections */
.detail-grid {
  display: grid; grid-template-columns: 1fr 1fr;
  gap: 16px; padding: 16px 24px;
}
.detail-item {}
.detail-label { font-size: 10px; font-weight: 700; color: var(--text3); text-transform: uppercase; letter-spacing: .7px; margin-bottom: 3px; }
.detail-val { font-size: 13px; color: var(--text); font-weight: 500; }

.detail-actions {
  display: flex; gap: 10px; padding: 14px 24px;
  border-top: 1px solid var(--border);
}

/* ── DISPATCHER PAGE ──────────────────────────────────────── */
.dispatch-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
}
.dispatch-grid .section-card:last-child { grid-column: 1 / -1; }

.dispatch-queue { padding: 12px; display: flex; flex-direction: column; gap: 8px; }
.dq-item {
  background: var(--surface2); border: 1px solid var(--border);
  border-radius: var(--rs); padding: 12px;
  display: flex; align-items: center; justify-content: space-between;
  gap: 10px; transition: var(--ease);
}
.dq-item:hover { border-color: var(--purple-gm); }
.dq-info {}
.dq-id { font-family: var(--mono); font-size: 11px; color: var(--purple-l); margin-bottom: 3px; font-weight: 600; }
.dq-route { font-size: 12px; color: var(--text); font-weight: 600; }
.dq-meta { font-size: 11px; color: var(--text2); margin-top: 2px; }
.dispatch-btn {
  background: var(--purple); color: #fff;
  padding: 6px 14px; border-radius: var(--rxs);
  font-size: 11px; font-weight: 700;
  transition: var(--ease); flex-shrink: 0;
}
.dispatch-btn:hover { background: var(--purple-l); transform: scale(1.03); }

.active-trips-panel { padding: 12px; display: flex; flex-direction: column; gap: 8px; }
.at-item {
  background: var(--surface2); border: 1px solid var(--border);
  border-left: 3px solid var(--orange);
  border-radius: var(--rs); padding: 12px;
  display: flex; align-items: center; justify-content: space-between;
}
.at-info .at-id { font-family: var(--mono); font-size: 11px; color: var(--orange); font-weight: 600; }
.at-info .at-route { font-size: 12px; font-weight: 600; color: var(--text); }
.at-info .at-driver { font-size: 11px; color: var(--text2); }
.at-progress {}
.at-pct { font-family: var(--mono); font-size: 16px; font-weight: 700; color: var(--orange); text-align: right; }
.progress-bar { height: 4px; width: 80px; background: var(--border); border-radius: 99px; overflow: hidden; margin-top: 4px; }
.progress-fill { height: 100%; background: var(--orange); border-radius: 99px; }

.today-stats {
  display: grid; grid-template-columns: 1fr 1fr;
  gap: 0;
  padding: 0;
}
.ts-item {
  padding: 16px;
  border-right: 1px solid var(--border);
  border-bottom: 1px solid var(--border);
  text-align: center;
}
.ts-item:nth-child(2n) { border-right: none; }
.ts-item:nth-last-child(-n+2) { border-bottom: none; }
.ts-val { font-size: 26px; font-weight: 700; font-family: var(--mono); color: var(--purple-l); }
.ts-lbl { font-size: 11px; color: var(--text2); margin-top: 2px; }

/* ── VEHICLE GRID ─────────────────────────────────────────── */
.vehicle-grid {
  display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
  gap: 14px; padding: 16px;
}
.veh-card {
  background: var(--surface2); border: 1px solid var(--border);
  border-radius: var(--rs); padding: 16px;
  transition: var(--ease);
}
.veh-card:hover { border-color: var(--purple-gm); transform: translateY(-2px); }
.veh-card-top { display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; }
.veh-ico { font-size: 28px; }
.veh-status-badge {}
.veh-id { font-size: 15px; font-weight: 700; font-family: var(--font-display); color: var(--text); margin-bottom: 2px; }
.veh-type { font-size: 11px; color: var(--text2); margin-bottom: 10px; }
.veh-stats { display: flex; flex-direction: column; gap: 6px; }
.vs-row { display: flex; justify-content: space-between; align-items: center; }
.vs-label { font-size: 11px; color: var(--text3); }
.vs-val { font-size: 12px; font-weight: 600; color: var(--text); font-family: var(--mono); }
.veh-fuel-bar { height: 4px; background: var(--border); border-radius: 99px; overflow: hidden; margin-top: 8px; }
.veh-fuel-fill { height: 100%; border-radius: 99px; }

/* ── DRIVER GRID ──────────────────────────────────────────── */
.driver-grid {
  display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 14px; padding: 16px;
}
.drv-card {
  background: var(--surface2); border: 1px solid var(--border);
  border-radius: var(--rs); padding: 16px;
  transition: var(--ease); text-align: center;
}
.drv-card:hover { border-color: var(--purple-gm); transform: translateY(-2px); }
.drv-av {
  width: 52px; height: 52px; border-radius: 50%; margin: 0 auto 10px;
  background: linear-gradient(135deg, var(--purple-d), var(--purple-l));
  display: flex; align-items: center; justify-content: center;
  font-size: 18px; font-weight: 700; color: #fff;
}
.drv-name { font-size: 14px; font-weight: 700; color: var(--text); margin-bottom: 2px; }
.drv-lic { font-size: 11px; color: var(--text2); font-family: var(--mono); margin-bottom: 8px; }
.drv-stats { display: flex; justify-content: center; gap: 16px; }
.ds-item { text-align: center; }
.ds-val { font-size: 16px; font-weight: 700; color: var(--purple-l); font-family: var(--mono); }
.ds-lbl { font-size: 10px; color: var(--text3); }

/* ── TRACKING PAGE ────────────────────────────────────────── */
.tracking-layout {
  display: grid; grid-template-columns: 1fr 360px; gap: 16px;
}
.map-placeholder {
  min-height: 420px;
  background: linear-gradient(135deg,
    rgba(113,75,103,0.1) 0%,
    rgba(13,15,24,0.9) 50%,
    rgba(113,75,103,0.08) 100%);
  position: relative; overflow: hidden;
}
.map-placeholder::before {
  content: '';
  position: absolute; inset: 0;
  background-image:
    repeating-linear-gradient(0deg, transparent, transparent 39px, var(--border) 40px),
    repeating-linear-gradient(90deg, transparent, transparent 39px, var(--border) 40px);
  opacity: .5;
}
.map-inner {
  position: absolute; inset: 0;
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  text-align: center; padding: 24px;
}
.map-title { font-size: 18px; font-weight: 700; font-family: var(--font-display); color: var(--text); margin-bottom: 6px; }
.map-sub { font-size: 12px; color: var(--text2); margin-bottom: 24px; }
.map-vehicles { display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; }
.map-veh-dot {
  background: var(--surface2); border: 1px solid var(--purple-gm);
  border-radius: var(--rs); padding: 8px 12px;
  font-size: 12px; font-weight: 600; color: var(--purple-l);
  display: flex; align-items: center; gap: 6px;
  animation: fadeUp .4s ease both;
}
.map-veh-dot .vd { width: 6px; height: 6px; border-radius: 50%; }

.live-badge {
  background: var(--gbg); color: var(--green); border: 1px solid var(--gbd);
  font-size: 10px; font-weight: 700; padding: 3px 9px; border-radius: 99px;
  animation: pulse 1.5s infinite;
}
.telemetry-list { padding: 12px; display: flex; flex-direction: column; gap: 8px; }
.tel-item {
  background: var(--surface2); border: 1px solid var(--border);
  border-radius: var(--rs); padding: 12px;
}
.tel-id { font-family: var(--mono); font-size: 11px; color: var(--purple-l); font-weight: 600; }
.tel-route { font-size: 12px; font-weight: 600; color: var(--text); margin: 2px 0; }
.tel-meta { font-size: 11px; color: var(--text2); }
.tel-progress { margin-top: 8px; }
.tel-pct { font-size: 10px; color: var(--text2); font-family: var(--mono); margin-bottom: 3px; display: flex; justify-content: space-between; }

/* ── ANALYTICS ────────────────────────────────────────────── */
.analytics-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
}
.analytics-grid .span2 { grid-column: 1 / -1; }
.analytics-kpis {
  display: grid; grid-template-columns: repeat(4, 1fr);
  gap: 12px; padding: 16px;
  border-bottom: 1px solid var(--border);
}
.ana-kpi { text-align: center; }
.ana-val { font-size: 26px; font-weight: 700; font-family: var(--mono); color: var(--purple-l); }
.ana-lbl { font-size: 11px; color: var(--text2); margin-top: 2px; }

.chart-area { padding: 16px; }
.chart-label { font-size: 12px; font-weight: 600; color: var(--text2); margin-bottom: 12px; }
.bar-chart { display: flex; align-items: flex-end; gap: 8px; height: 100px; }
.bc-col { flex: 1; display: flex; flex-direction: column; align-items: center; gap: 4px; }
.bc-bar {
  width: 100%; border-radius: 4px 4px 0 0;
  background: linear-gradient(180deg, var(--purple-l), var(--purple-d));
  min-height: 4px;
  animation: barGrow .8s ease both;
}
@keyframes barGrow { from { height: 0 !important; } }
.bc-lbl { font-size: 10px; color: var(--text3); font-family: var(--mono); }

.top-driver-item, .route-item {
  display: flex; align-items: center; justify-content: space-between;
  padding: 10px 16px;
  border-bottom: 1px solid var(--border);
  font-size: 12px;
}
.top-driver-item:last-child, .route-item:last-child { border-bottom: none; }
.tdi-left { display: flex; align-items: center; gap: 8px; }
.tdi-rank { font-family: var(--mono); font-size: 11px; color: var(--text3); width: 18px; }
.tdi-val { font-family: var(--mono); font-size: 13px; font-weight: 700; color: var(--purple-l); }
.tdi-sub { font-size: 10px; color: var(--text3); }

.fuel-eff-item {
  padding: 10px 16px; border-bottom: 1px solid var(--border);
}
.fuel-eff-item:last-child { border-bottom: none; }
.fei-top { display: flex; justify-content: space-between; font-size: 12px; margin-bottom: 6px; }
.fei-bar { height: 4px; background: var(--border); border-radius: 99px; overflow: hidden; }
.fei-fill { height: 100%; background: linear-gradient(90deg, var(--green), var(--teal)); border-radius: 99px; }

/* ── COMPLIANCE PAGE ──────────────────────────────────────── */
.compliance-grid {
  display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap: 14px; padding: 16px;
}
.comp-card {
  background: var(--surface2); border: 1px solid var(--border);
  border-radius: var(--rs); padding: 16px;
}
.comp-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px; }
.comp-name { font-size: 13px; font-weight: 700; color: var(--text); }
.comp-status { font-size: 10px; font-weight: 700; padding: 3px 8px; border-radius: 99px; }
.cs-ok       { background: var(--gbg); color: var(--green); border: 1px solid var(--gbd); }
.cs-warn     { background: var(--ybg); color: var(--yellow); border: 1px solid var(--ybd); }
.cs-fail     { background: var(--rbg); color: var(--red); border: 1px solid var(--rbd); }
.comp-detail { font-size: 11px; color: var(--text2); margin-bottom: 3px; }

/* ── SETTINGS ─────────────────────────────────────────────── */
.settings-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
.settings-form { padding: 16px; display: flex; flex-direction: column; gap: 14px; }
.setting-row { display: flex; align-items: center; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid var(--border); }
.setting-info { font-size: 13px; }
.setting-lbl { font-weight: 600; color: var(--text); }
.setting-sub { font-size: 11px; color: var(--text2); margin-top: 2px; }
.toggle {
  width: 42px; height: 22px; border-radius: 99px;
  background: var(--surface3); border: 1px solid var(--border2);
  cursor: pointer; position: relative; transition: var(--ease); flex-shrink: 0;
}
.toggle.on { background: var(--purple); border-color: var(--purple); }
.toggle::after {
  content: '';
  position: absolute; top: 2px; left: 2px;
  width: 16px; height: 16px; border-radius: 50%;
  background: #fff; transition: var(--ease);
}
.toggle.on::after { transform: translateX(20px); }

.rbac-table { padding: 16px; }
.rbac-row {
  display: grid; grid-template-columns: 120px repeat(3, 1fr);
  gap: 8px; align-items: center;
  padding: 10px 0; border-bottom: 1px solid var(--border);
  font-size: 12px;
}
.rbac-row:last-child { border-bottom: none; }
.rbac-role { font-weight: 700; color: var(--purple-l); }
.rbac-perm {
  display: flex; align-items: center; gap: 5px; justify-content: center;
  font-size: 11px; color: var(--text2);
}
.perm-yes { color: var(--green); }
.perm-no  { color: var(--red); }

/* ── TOAST ────────────────────────────────────────────────── */
#toastRoot {
  position: fixed; bottom: 24px; right: 24px;
  display: flex; flex-direction: column; gap: 8px;
  z-index: 9999;
}
.toast {
  display: flex; align-items: center; gap: 10px;
  padding: 12px 16px; border-radius: var(--rs);
  min-width: 280px; max-width: 380px;
  background: var(--surface);
  border: 1px solid var(--border2);
  box-shadow: var(--shadow-lg);
  animation: toastIn .35s cubic-bezier(.34,1.56,.64,1);
  cursor: pointer; font-size: 13px;
}
@keyframes toastIn {
  from { opacity: 0; transform: translateX(30px) scale(.9); }
  to   { opacity: 1; transform: translateX(0) scale(1); }
}
.toast.out { animation: toastOut .3s ease forwards; }
@keyframes toastOut {
  to { opacity: 0; transform: translateX(30px); }
}
.toast.success { border-left: 3px solid var(--green); }
.toast.error   { border-left: 3px solid var(--red); }
.toast.info    { border-left: 3px solid var(--blue); }
.toast.warn    { border-left: 3px solid var(--yellow); }
.toast-ico { font-size: 16px; flex-shrink: 0; }
.toast-msg { flex: 1; color: var(--text); }
.toast-x   { color: var(--text3); font-size: 12px; }

/* ── QUEUE COUNT ──────────────────────────────────────────── */
.queue-count {
  background: var(--ybg); color: var(--yellow); border: 1px solid var(--ybd);
  font-size: 11px; font-weight: 700; padding: 3px 10px; border-radius: 99px;
}

/* ── ANIMATIONS ───────────────────────────────────────────── */
@keyframes fadeUp {
  from { opacity: 0; transform: translateY(14px); }
  to   { opacity: 1; transform: translateY(0); }
}

/* ── RESPONSIVE ───────────────────────────────────────────── */
@media (max-width: 1200px) {
  .kpi-row { grid-template-columns: repeat(3, 1fr); }
  .analytics-grid { grid-template-columns: 1fr; }
  .analytics-grid .span2 { grid-column: 1; }
  .analytics-kpis { grid-template-columns: repeat(2, 1fr); }
  .tracking-layout { grid-template-columns: 1fr; }
}
@media (max-width: 900px) {
  :root { --sidebar-w: 200px; }
  .kpi-row { grid-template-columns: repeat(2, 1fr); }
  .settings-grid { grid-template-columns: 1fr; }
  .dispatch-grid { grid-template-columns: 1fr; }
  .dispatch-grid .section-card:last-child { grid-column: 1; }
}
@media (max-width: 700px) {
  .sidebar { position: fixed; transform: translateX(-100%); }
  .sidebar.mobile-open { transform: translateX(0); box-shadow: var(--shadow-lg); }
  .mob-menu-btn { display: flex; }
  .kpi-row { grid-template-columns: 1fr 1fr; }
  .pages-container { padding: 14px; }
  .filter-bar { gap: 8px; }
  .hdr-search { display: none; }
  .form-row.two { flex-direction: column; }
  .fuel-row { flex-wrap: wrap; }
  .detail-grid { grid-template-columns: 1fr; }
}
@media (max-width: 480px) {
  .kpi-row { grid-template-columns: 1fr; }
  .top-header { padding: 0 14px; }
  .modal { width: 100vw; top: auto; bottom: 0; left: 0; transform: none; border-radius: 18px 18px 0 0; }
  .modal.show { transform: none; animation: modalUp .3s ease; }
  @keyframes modalUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
}
